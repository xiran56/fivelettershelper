# Код помощника для игры «5 букв» Т-Банка  

**Определения:**

Алфавит – “АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ” (32 буквы, русский алфавит без ё), нумерация начинается с 0, регистр не важен.  
Слово – слово из 5 букв Алфавита, нумерация начинается с 0.**  
<br/><br/>**Использование:**  
<br/>Предполагается, что юзер уже играл в «5 букв» и знает правила.  
Сайт предлагает ввести в игру 3 Слова в произвольном порядке: «МЕТОД», «СПЛИН», «КУРВА».  
В среднем после них остается 1,53 ответа.  
Далее через контрол подобный тому, что в игре юзер вводит на сайт информацию о наличии/отсутствии/расположении букв в Слове, которую дала игра.  

Каждое слово разделено на _letter-box_’ы, маленькие квадратные окошки с закругленными углами для каждой буквы.

Ввод и-ции осуществляется через нажатие на _letter-box_’ы, по умолчанию _letter-box_ серый и обозначает отсутствие буквы в загаданном игрой Слове, нажав на него, юзер окрасит его в белый, что обозначает то, что буква в Слове есть, но она не на этом месте, повторное нажатие окрасит _letter-box_ в желтый, обозначив то, что буква в загаданном Слове именно на том же месте, что в том слове, что выдала игра.  
Управление для игроков будет интуитивным, ибо оно повторяет цвета «5 букв» Т-Банка.  
<br/>После ввода юзер может нажать кнопку «Получить слово» и сайт вычислит подходящее под данную информацию Слово.  
<br/>Если это не загаданное Слово, то он может так же ввести информацию об этом слове и получить новое слово.  
<br/><br/>**Техническая часть**:  
<br/>Реализован как статический сайт для делпоя на Github Pages на HTML/CSS/JS/WASM без фреймворков.

WASM модуль представляет собой скомпилированный C код без Emscripten.

C код написан только для WASM и может не работать на других платформах.  
<br/>Словарь встроен в C код, хранится в виде двумерного статического массива unsigned char (по спецификации WASM – 1 байт) размером 2086 слов. Вместо самих букв хранится их место в Алфавите для удобства работы с кодировками.  

C код предоставляет интерфейс следующего вида:  
void calculate_word(int missing_letters, mask_t correct, icorrect_mask_t icorrect);  

missing_letters – 32-ух битная переменная по спецификации WASM, если выставлен n-ный бит, то n-ной буквы Алфавита в загаданном игрой Слове нет.  

correct – массив из 5 байт (mask_t), каждый представляет определенную букау. Если его I-ный элемент равен n, и n != UNKNOWN, где UNKNOWN = 32, то на I-ной позиции в загаданном игрой Слове находится буква Алфавита под номером n.

Icorrect – массив из 5-и 32-ух битных переменных (icorrect_mask_t), Если в его i-ом элементе выставлен j-ый бит, то на позиции I в загаданном игрой Слове не находится буква Алфавита под номером j.  
<br/>Функция находит и выставляет в глобальную переменную индекс (в словаре) подходящего Слова.  
<br/>Дальше через функцию void get_word(uint8_t \*buf) JavaScript получает слово, передав указатель на массив из 5 байт.
